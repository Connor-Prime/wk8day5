(()=>{"use strict";class e{constructor(e,t,r,n){this._name=e,this._descirption=t,this._price=r,this._amount=n}get description(){return this._descirption}set description(e){this._descirption=e}get name(){return this._name}set name(e){this._name=e}get price(){return this._price}set price(e){this._price=e}get amount(){return this._amount}set amount(e){this._amount=e}changeAmount(e){this.amount-=e}}class t{static loginInUser(e,r,n){null!=e&&null!=r&&(e in n.users||(n.users[e]=new t(e,r)),n.currentUser=n.users[e])}constructor(e,t){this._username=e,this._age=t,this.cart=new r(((e,t)=>{e.deleteProduct(t.name)})),this.users={},this.currentUser=null}get age(){return this._age}set age(e){this._age=e}get username(){return this._username}set username(e){this._username=e}addToCart(e){this.cart.addProduct(e)}}class r{constructor(e){this.deleteItems=e,this.items={}}showItems(){let e=document.getElementById("cart-list"),t="";for(let e in this.items){let r=this.items[e];t+="<div>"+r.name+"<br> price: $"+String(r.price)+"<br>description: "+r.description+"<br>"+`${r.amount} in your cart<br>`+`<button class="remove-${r.name}">Remove From Cart</button><br><br><br></div>`}for(let e in this.items){let t=this.items[e],r=document.querySelector(`#remove-${t.name.replace(" ","-")}`);null==r||r.addEventListener("click",(e=>{this.deleteItems(this,t)}))}e.innerHTML=t}addProduct(e){this.items[e.name]=e,this.showItems()}deleteProduct(e){null!=e&&(delete this.items[e],this.showItems())}}let n=document.getElementById("login-btn"),s=(document.querySelector("#age-input"),document.querySelector("#username-input")),i=new class{constructor(e){this.storage={},this.users={},this.currentUser=new t(void 0,void 0),this._addFunction=()=>{},this._addFunction=e}showItems(){let e=document.getElementById("product-list"),t="";for(let e in this.storage){let r=this.storage[e];t+="<div>"+r.name+"<br> price: $"+String(r.price)+"<br>description: "+r.description+"<br>"+`${r.amount} in stock<br>`+`Enter amount to add:\n            <br><input input type="text" name="username" maxlength="3" id="${r.name.replace(" ","-")}-amount"\n            <br>\n            <br>\n            <button id="add-${r.name.replace(" ","-")}">Add to Cart</button><br><br>`}e.innerHTML=t;for(let e in this.storage){let t=this.storage[e],r=(document.querySelector(`#${t.name.replace(" ","-")}-amount`).value,document.querySelector(`#add-${t.name.replace(" ","-")}`));null==r||r.addEventListener("click",(t=>{this._addFunction(this,e)}))}}addProduct(t,r,n,s){this.storage[t]=new e(t,r,n,s)}deleteProduct(e){null!=e&&(delete this.storage[e],this.showItems())}loginUser(){document.getElementById("welcome-header").innerText=`Welcome ${this.currentUser.username}`}}(((t,r)=>{let n=t.storage[r],s=document.querySelector(`#${n.name.replace(" ","-")}-amount`).value;if(console.log("click"),Number(s)<=n.amount){n.amount-=Number(s);let i=t.currentUser.cart;if(n.name in i.items)t.currentUser.cart.items[r].changeAmount(-s);else{let r=new e(n.name,n.description,n.price,n.amount-Number(s));r.amount=Number(s),t.currentUser.cart.addProduct(r)}t.showItems()}}));i.addProduct("Banana","Fresh yellow bananas",.25,30),i.addProduct("Strawberries","Fresh red strawberries",3.25,30),i.addProduct("Apple","Crisp red macntoth apple",.25,30),i.addProduct("Blueberries","Sweet little basket of blueberries",3.55,30),i.addProduct("Oranges","Fresh navel oranges",1.25,20),i.addProduct("Romain Lettuce","A head of romain lettuce",1.25,30),i.showItems(),t.loginInUser("Connor","26",i),i.loginUser(),null==n||n.addEventListener("click",(e=>{(()=>{let e=s.value,r=s.value;t.loginInUser(e,r,i),i.loginUser()})()}))})();